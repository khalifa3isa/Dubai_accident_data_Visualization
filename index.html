<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accident Visualization in Dubai</title>

    <link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.13.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.13.0/mapbox-gl.css" rel="stylesheet" />
    <script src="https://d3js.org/d3.v6.min.js"></script>



    <link rel="stylesheet" href="style.css">
  
    

</head>
<body>
    <header>
        <h1>Dubai Accident Visualization</h1>
    </header>
    <div id="mapTitle">
        <h2>Heatmap: Accident Density in Dubai</h2>
    </div>
   

    <div id="map-container" style="width: 90%; height: 600px;"></div>

    <div id="controls">
        <label for="weather-filter">Filter by Weather:</label>
        <select id="weather-filter">
            <option value="All">All</option>
            <option value="Clear">Clear</option>
            <option value="Rain">Rain</option>
            <option value="Cloudy">Cloudy</option>
        </select>
    
        <label for="time-slider">Filter by Time:</label>
        <input type="range" id="time-slider" min="0" max="23" step="1">
        <span id="time-label">Time: 0</span>
    </div>

    <div id="accident-type-chart"></div>

    <div id="networkGraphTitle">
        <h2>Network Graph of Weather Conditions and Accident Types</h2>
    </div>

    <div id="networkGraphContainer"></div>

<div id="network-legend">
    <div>
        <span class="legend-color" style="background-color: #69b3a2;"></span>
        <span>Weather Conditions</span>
    </div>
    <div>
        <span class="legend-color" style="background-color: #ff6347;"></span>
        <span>Accident Types</span>
    </div>
</div>

<div><h1>Conclusion</h1></div>
<dir><h2>These three visualizations work together to provide a comprehensive understanding of accidents in Dubai:</h2></dir>
<dir><h2>
    1.The heatmap focuses on spatial patterns.
    </h2>
</dir>
<div><h2>2.The pie chart provides categorical proportions.</h2></div>
<div><h2>3.The network graph explores relationships between factors.</h2></div>
<dir><h3>This combination enables data-driven decision-making to improve road safety and resource allocation.</h3></dir>
    
<div id="visualization-explanation">
    <h2>Understanding the Visualizations</h2>
    <p>
        <strong>1. Preprocessing and Filtering:</strong> 
        We did a lot of prep work to make the data usable. First, we combined the accident data with weather data by matching locations and timestamps, so each accident had its weather conditions. Some of the labels were in Arabic, so we translated them into English for consistency. Then, we converted the accident data into GeoJSON to make it work with the map.

    </p>
    <p>
        <strong>2. Why are these visualizations effective?</strong>
        These visualizations simplify complex data. The heatmap shows where accidents are concentrated, the pie chart shows which accident types dominate, and the network graph explains relationships between weather and accidents. Together, they help answer the where, what, and why of accidents.
    </p>
    <p>
        <strong>3. Patterns and Anomalies:</strong>
        - The heatmap reveals accident hotspots, especially in Downtown Dubai, with new areas lighting up during rain.<br>
        - The pie chart highlights that minor accidents are most common, but severe accidents increase under bad weather.<br>
        - The network graph links fog to severe accidents and shows how "Violating Vehicles" correlate with overcast weather.
    </p>
    <p>
        <strong>4. Encoding and Interactions:</strong>
        <ul>
            <li><strong>Heatmap:</strong> Uses color intensity and position (latitude, longitude) to encode density. Filters for weather and time allow focused exploration.</li>
            <li><strong>Pie Chart:</strong> Uses slice angles for proportions and color for accident types. Filters dynamically update the chart, with tooltips for details.</li>
            <li><strong>Network Graph:</strong> Uses nodes (circles) for weather and accident types, and edges (lines) to show relationships. Dragging nodes and filtering add interactivity.</li>
        </ul>
    </p>
</div>
<div id="page-end-spacer"></div>


    <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/d3.v6.min.js"></script>

    <script src="app.js"></script>
    <script src="subgraph.js"></script>
    <script src="subgraphTwo.js"></script>
</body>
</html>
